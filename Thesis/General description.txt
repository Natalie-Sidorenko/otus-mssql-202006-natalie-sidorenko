Хочу изобразить в проекте простой кусочек бизнес-процесса компании, где я работала (компания занимается курьерской доставкой). Это будет сортировочный центр и его процесс инвентаризации.
Для простоты я не буду брать отправку груза в регионы, пусть будет только выдача курьерам по Москве и МО.
Каждую ночь создаются накладные (заказы получателей из разных интернет-магазнов) с датой доставки, установленной на наступающий день. (Одновременно физически поступают посылки по ним.) Утром они выдаются курьерам. Курьер в течение дня проставляет своим накладным различные результаты доставки: "Доставлено.", "Не доставлено. Получатель недоступен.", "Отказ. Возврат.", "Не доставлено. Перенос даты доставки на такую-то.". Вечером курьер возвращает недоставленные накладные на сортировочный центр. Ночью происходит инвентаризация.
Накладные с завтрашней датой отправляются "в доставку" - чтобы их наутро выдали курьерам, накладные с результатом "Не доставлено. Получатель недоступен." отправляются "на прозвон" колл-центру для установки даты доставки (пусть туда же отправляются накладные и с более поздними установленными датами доставки), накладные с результатом "Отказ. Возврат." отправляются "на возврат". Колл-центр в любое время может согласовать с получателем новую дату, и при последующих инвентаризациях в ночь, когда дата доставки завтра, накладная отправится "в доставку", а до того будет числиться "на прозвоне". "Возврат" и "Доставлено" будут конечными состояниями накладной. На сортировочном центре пусть будут существовать всего три т.н. "кладовки": "Возврат", "Прозвон" и "Доставка", расклад по которым и есть инвентаризация.